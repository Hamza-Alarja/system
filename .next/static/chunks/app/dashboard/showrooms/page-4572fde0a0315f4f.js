(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[113],{1167:(e,s,t)=>{"use strict";t.d(s,{ShowroomsListPage:()=>g});var a=t(7553),l=t(5525),m=t(4742),r=t.n(m),x=t(8445),c=t(6423),n=t(1623),i=t(2158),d=t(7131),h=t(9726),o=t(3616),p=t(6393),j=t(2801);let N=(0,t(2735).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var w=t(9365);function g(){let[e,s]=(0,l.useState)(""),[t,m]=(0,l.useState)([]),[g,y]=(0,l.useState)(!0),{user:u}=(0,w.n)();(0,l.useEffect)(()=>{(async()=>{try{y(!0);let e=await fetch("/api/showrooms",{method:"GET",credentials:"include"});if(!e.ok)throw Error("Failed to load showrooms");let s=await e.json(),t=await fetch("/api/employees"),a=(await t.json()).employees||[],l=(s.showrooms||[]).map(e=>{let s=a.filter(s=>s.showroomId===e.id).length;return{id:e.id,name:e.name,address:e.address,employeeCount:s,created_at:e.created_at}});m(l)}catch(e){console.error("Error fetching showrooms:",e)}finally{y(!1)}})()},[]);let f=t.filter(s=>s.name.toLowerCase().includes(e.toLowerCase())||s.address.toLowerCase().includes(e.toLowerCase()));return(0,a.jsx)("div",{className:"space-y-4 p-2 sm:p-4 md:p-6",dir:"rtl",children:(0,a.jsxs)(c.Zp,{className:"border-0 rounded-lg sm:rounded-xl shadow-sm",children:[(0,a.jsx)(c.aR,{className:"p-3 sm:p-4 md:p-6 border-b",children:(0,a.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row justify-between items-start sm:items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.ZB,{className:"text-sm sm:text-base md:text-lg font-semibold",children:"قائمة المعارض في الإمارات"}),(0,a.jsx)(c.BT,{className:"text-xs sm:text-sm",children:"قائمة بجميع المعارض مع عدد الموظفين"})]}),(0,a.jsxs)("div",{className:"relative w-full sm:w-56 md:w-64",children:[(0,a.jsx)(h.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 sm:h-4 sm:w-4 text-gray-400"}),(0,a.jsx)(d.p,{placeholder:"بحث...",value:e,onChange:e=>s(e.target.value),className:"pr-8 pl-8 sm:pr-10 sm:pl-10 w-full text-xs sm:text-sm h-8 sm:h-9"})]})]})}),(0,a.jsx)(c.Wu,{className:"p-0",children:g?(0,a.jsx)("div",{className:"flex justify-center items-center p-8 sm:p-12",children:(0,a.jsx)(o.A,{className:"h-6 w-6 sm:h-8 sm:w-8 animate-spin text-red-600"})}):0===f.length?(0,a.jsxs)("div",{className:"text-center p-6 sm:p-12",children:[(0,a.jsx)(p.A,{className:"mx-auto h-8 w-8 sm:h-12 sm:w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-3 text-sm sm:text-base md:text-lg font-medium text-gray-900",children:e?"لا توجد نتائج بحث":"لا توجد معارض مسجلة"}),(0,a.jsx)("p",{className:"mt-1 text-xs sm:text-sm text-gray-500",children:e?"حاول تعديل مصطلحات البحث الخاصة بك":"ابدأ بإضافة معرض جديد"}),(null==u?void 0:u.role)==="owner"&&!e&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(x.$,{asChild:!0,size:"sm",children:(0,a.jsxs)(r(),{href:"/dashboard/showrooms/new",children:[(0,a.jsx)(j.A,{className:"ml-2 h-4 w-4"}),(0,a.jsx)("span",{className:"text-xs sm:text-sm",children:"إضافة معرض جديد"})]})})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"sm:hidden space-y-2 p-2",children:f.map(e=>(0,a.jsxs)(c.Zp,{className:"p-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"font-medium text-sm",children:e.name})]}),(0,a.jsxs)(i.E,{variant:"outline",className:"text-xs ".concat(e.employeeCount>0?"bg-green-50 text-green-700":"bg-gray-50"),children:[e.employeeCount," موظف"]})]}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-xs text-gray-500",children:[(0,a.jsx)(N,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:e.address})]}),(0,a.jsx)("div",{className:"mt-2 flex justify-between items-center",children:(0,a.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.created_at).toLocaleDateString("en-GB")})})]},e.id))}),(0,a.jsx)("div",{className:"hidden sm:block overflow-x-auto",children:(0,a.jsxs)(n.XI,{className:"min-w-full",children:[(0,a.jsx)(n.A0,{className:"bg-gray-50",children:(0,a.jsxs)(n.Hj,{children:[(0,a.jsx)(n.nd,{className:"text-right text-xs sm:text-sm px-2 sm:px-4 py-2",children:"اسم المعرض"}),(0,a.jsx)(n.nd,{className:"text-right text-xs sm:text-sm px-2 sm:px-4 py-2",children:"الموقع"}),(0,a.jsx)(n.nd,{className:"text-right text-xs sm:text-sm px-2 sm:px-4 py-2",children:"الموظفون"}),(0,a.jsx)(n.nd,{className:"text-right text-xs sm:text-sm px-2 sm:px-4 py-2",children:"تاريخ الإنشاء"})]})}),(0,a.jsx)(n.BF,{children:f.map(e=>(0,a.jsxs)(n.Hj,{className:"hover:bg-gray-50",children:[(0,a.jsx)(n.nA,{className:"px-2 sm:px-4 py-2",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p.A,{className:"ml-2 h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-xs sm:text-sm",children:e.name})]})}),(0,a.jsx)(n.nA,{className:"px-2 sm:px-4 py-2",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(N,{className:"ml-2 h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-xs sm:text-sm",children:e.address})]})}),(0,a.jsx)(n.nA,{className:"px-2 sm:px-2 md:px-2 py-2",children:(0,a.jsxs)(i.E,{variant:"outline",className:"md:text-xs sm:text-xs ".concat(e.employeeCount>0?"bg-green-50 text-green-700":"bg-gray-50"),children:[e.employeeCount," موظف"]})}),(0,a.jsx)(n.nA,{className:"text-gray-500 text-xs sm:text-sm px-2 sm:px-4 py-2",children:new Date(e.created_at).toLocaleDateString("en-GB")})]},e.id))})]})})]})})]})})}},7060:(e,s,t)=>{Promise.resolve().then(t.bind(t,1167))}},e=>{e.O(0,[120,261,958,562,552,772,358],()=>e(e.s=7060)),_N_E=e.O()}]);