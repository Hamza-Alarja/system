(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{2621:(e,t,s)=>{"use strict";s.d(t,{DashboardPage:()=>p});var a=s(7553),r=s(6423),l=s(6393),o=s(2026),i=s(2735);let n=(0,i.A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),d=(0,i.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var c=s(9365),m=s(6406),u=s(4742),A=s.n(u),h=s(3650);function p(){let{user:e}=(0,c.n)(),{showrooms:t,employees:s,transactions:i}=(0,m.C)(),u=e=>new Intl.NumberFormat("en-US").format(e),p=[{title:"إجمالي المعارض",value:u(t.length),icon:l.A,description:"معارض نشطة",color:"text-blue-600"},{title:"إجمالي الموظفين",value:u(s.length),icon:o.A,description:"موظفين نشطين",color:"text-green-600"},{title:"المصاريف الشهرية",value:"".concat(u(i.filter(e=>"sales"===e.type).reduce((e,t)=>e+t.amount,0))),icon:h.M,description:"هذا الشهر",color:"text-purple-600"},{title:"معدل النمو",value:"+12.5%",icon:n,description:"مقارنة بالشهر الماضي",color:"text-orange-600"}],g=[{title:"إضافة معرض جديد",icon:l.A,href:"/dashboard/showrooms/new",color:"bg-purple-100 text-purple-600"},{title:"إضافة موظف جديد",icon:o.A,href:"/dashboard/employees/new",color:"bg-purple-100 text-purple-600"},{title:"تسجيل معاملة مالية",icon:h.M,href:"/dashboard/transactions",color:"bg-purple-100 text-purple-600"}];return(0,a.jsxs)("div",{className:"space-y-6 p-4 md:p-6",dir:"rtl",children:[(0,a.jsx)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:"لوحة التحكم"}),(0,a.jsxs)("p",{className:"text-gray-500 mt-1",children:["مرحباً بعودتك،"," ",(0,a.jsx)("span",{className:"font-medium text-primary",children:null==e?void 0:e.name}),"! هذه أحدث التطورات في معارضك."]})]})}),(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:p.map((e,t)=>(0,a.jsxs)(r.Zp,{className:"border-0 rounded-xl shadow-sm  ",children:[(0,a.jsxs)(r.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,a.jsx)(r.ZB,{className:"text-sm font-medium text-gray-500",children:e.title}),(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(e.color.replace("text","bg")+" bg-opacity-20"),children:(0,a.jsx)(e.icon,{className:"h-4 w-4 ".concat(e.color)})})]}),(0,a.jsxs)(r.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold ".concat(e.color),children:e.value}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:e.description})]})]},t))}),(0,a.jsx)("div",{className:"grid gap-4",children:(0,a.jsxs)(r.Zp,{className:"border-0 rounded-xl shadow-sm",children:[(0,a.jsxs)(r.aR,{children:[(0,a.jsx)(r.ZB,{className:"text-lg font-semibold",children:"إجراءات سريعة"}),(0,a.jsx)(r.BT,{className:"text-gray-500 text-sm",children:"الوصول السريع إلى المهام الأساسية"})]}),(0,a.jsx)(r.Wu,{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:g.map((e,t)=>(0,a.jsxs)(A(),{href:e.href,className:"flex items-center p-4 rounded-lg transition-all  ".concat(e.color.replace("text","")," border border-gray-100"),children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(e.color," bg-opacity-20 mr-3"),children:(0,a.jsx)(e.icon,{className:"h-5 w-5 ".concat(e.color)})}),(0,a.jsx)("span",{className:"font-medium",children:e.title}),(0,a.jsx)(d,{className:"h-4 w-4 text-gray-400 mr-auto"})]},t))})]})})]})}},3650:(e,t,s)=>{"use strict";s.d(t,{M:()=>o});var a=s(7553);s(5525);var r=s(234);let l={src:"/_next/static/media/icon.1b886d4a.png",height:899,width:1033,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAMAAAACh/xsAAAAJFBMVEVMaXEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/eFplAAAADHRSTlMAgfBsda8lk+FTEaWCLTslAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAL0lEQVR4nD2LWQoAIBCFfLM11f3vGwT1J6KUxVQAqwtSIBvyNL+gbUE885tqv9cBGIAAxiUU3jQAAAAASUVORK5CYII=",blurWidth:8,blurHeight:7};function o(e){let{size:t=14,alt:s="UAE Dirham Icon"}=e;return(0,a.jsx)(r.default,{src:l,width:t,height:t,alt:s})}},4282:(e,t,s)=>{Promise.resolve().then(s.bind(s,2621))},6406:(e,t,s)=>{"use strict";s.d(t,{C:()=>a});let a=(0,s(7966).v)()(e=>({employees:[],showrooms:[],transactions:[],isLoading:!1,selectedShowroom:null,selectedEmployee:null,setShowrooms:t=>e({showrooms:t}),addShowroom:t=>e(e=>({showrooms:[...e.showrooms,{...t,id:t.id||Date.now().toString(),managers:t.managers||[],employeeCount:t.employeeCount||0,createdAt:t.createdAt||new Date().toISOString()}]})),setEmployees:t=>e({employees:t}),addEmployee:t=>e(e=>({employees:[...e.employees,t]})),setTransactions:t=>e({transactions:t}),addTransaction:t=>e(e=>({transactions:[...e.transactions,t]})),setLoading:t=>e({isLoading:t}),setSelectedShowroom:t=>e({selectedShowroom:t}),setSelectedEmployee:t=>e({selectedEmployee:t}),fetchEmployees:async()=>{let t=await fetch("/api/employees");e({employees:(await t.json()).employees||[]})},fetchShowrooms:async()=>{let t=await fetch("/api/showrooms");e({showrooms:(await t.json()).showrooms||[]})},fetchTransactions:async()=>{let t=await fetch("/api/transactions");e({transactions:(await t.json()).transactions||[]})}}))},6423:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>n,Zp:()=>o,aR:()=>i});var a=s(7553),r=s(5525),l=s(7466);let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});o.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...r})});i.displayName="CardHeader";let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});n.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",s),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},7466:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var a=s(2530),r=s(6747);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},9365:(e,t,s)=>{"use strict";s.d(t,{n:()=>o});var a=s(7966),r=s(1326),l=s(261);let o=(0,a.v)()((0,r.Zr)(e=>{let t=(0,l.createClientComponentClient)();return{user:null,isAuthenticated:!1,isLoading:!1,login:async(s,a)=>{e({isLoading:!0});try{if("string"!=typeof s||"string"!=typeof a)throw Error("Email and password must be strings");let{data:r,error:l}=await t.auth.signInWithPassword({email:s.trim(),password:a.trim()});if(l)throw l;if(!r.user)throw Error("User not found after login");let{data:o,error:i}=await t.from("users").select("name, role").eq("auth_user_id",r.user.id).single();if(i)throw i;e({user:{id:r.user.id,email:r.user.email||s,name:(null==o?void 0:o.name)||"",role:(null==o?void 0:o.role)||"employee"},isAuthenticated:!0,isLoading:!1})}catch(t){throw e({isLoading:!1}),console.error("Login error:",t),t}},logout:async()=>{e({isLoading:!0});try{await t.auth.signOut()}finally{e({user:null,isAuthenticated:!1,isLoading:!1})}},checkAuth:async()=>{e({isLoading:!0});try{let{data:{session:l}}=await t.auth.getSession();if(null==l?void 0:l.user){var s,a,r;let{data:o,error:i}=await t.from("users").select("name, role").eq("auth_user_id",l.user.id).single();if(i||!o)throw i;e({user:{id:l.user.id,email:null!=(s=l.user.email)?s:"",name:null!=(a=o.name)?a:"",role:null!=(r=o.role)?r:"employee"},isAuthenticated:!0,isLoading:!1})}else e({user:null,isAuthenticated:!1,isLoading:!1})}catch(t){console.error("checkAuth error:",t),e({user:null,isAuthenticated:!1,isLoading:!1})}}}},{name:"auth-storage"}))}},e=>{e.O(0,[120,261,958,117,552,772,358],()=>e(e.s=4282)),_N_E=e.O()}]);