(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[275],{3650:(e,s,t)=>{"use strict";t.d(s,{M:()=>n});var a=t(7553);t(5525);var l=t(234);let m={src:"/_next/static/media/icon.1b886d4a.png",height:899,width:1033,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAMAAAACh/xsAAAAJFBMVEVMaXEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/eFplAAAADHRSTlMAgfBsda8lk+FTEaWCLTslAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAL0lEQVR4nD2LWQoAIBCFfLM11f3vGwT1J6KUxVQAqwtSIBvyNL+gbUE885tqv9cBGIAAxiUU3jQAAAAASUVORK5CYII=",blurWidth:8,blurHeight:7};function n(e){let{size:s=14,alt:t="UAE Dirham Icon"}=e;return(0,a.jsx)(l.default,{src:m,width:s,height:s,alt:t})}},5714:(e,s,t)=>{Promise.resolve().then(t.bind(t,7881))},6406:(e,s,t)=>{"use strict";t.d(s,{C:()=>a});let a=(0,t(7966).v)()(e=>({employees:[],showrooms:[],transactions:[],isLoading:!1,selectedShowroom:null,selectedEmployee:null,setShowrooms:s=>e({showrooms:s}),addShowroom:s=>e(e=>({showrooms:[...e.showrooms,{...s,id:s.id||Date.now().toString(),managers:s.managers||[],employeeCount:s.employeeCount||0,createdAt:s.createdAt||new Date().toISOString()}]})),setEmployees:s=>e({employees:s}),addEmployee:s=>e(e=>({employees:[...e.employees,s]})),setTransactions:s=>e({transactions:s}),addTransaction:s=>e(e=>({transactions:[...e.transactions,s]})),setLoading:s=>e({isLoading:s}),setSelectedShowroom:s=>e({selectedShowroom:s}),setSelectedEmployee:s=>e({selectedEmployee:s}),fetchEmployees:async()=>{let s=await fetch("/api/employees");e({employees:(await s.json()).employees||[]})},fetchShowrooms:async()=>{let s=await fetch("/api/showrooms");e({showrooms:(await s.json()).showrooms||[]})},fetchTransactions:async()=>{let s=await fetch("/api/transactions");e({transactions:(await s.json()).transactions||[]})}}))},7881:(e,s,t)=>{"use strict";t.d(s,{EmployeesListPage:()=>g});var a=t(7553),l=t(5525),m=t(4742),n=t.n(m),r=t(8445),x=t(6423),c=t(1623),i=t(2158),d=t(7131),o=t(9726),h=t(3616),A=t(2026),p=t(2801),j=t(6393),w=t(9365),N=t(3650),y=t(6406);function g(){let[e,s]=(0,l.useState)(""),[t,m]=(0,l.useState)([]),[g,u]=(0,l.useState)(!0),{user:f}=(0,w.n)(),{showrooms:v}=(0,y.C)(),b=e=>{let s=v.find(s=>s.id===e);return(null==s?void 0:s.name)||"معرض غير معروف"},E=(null==f?void 0:f.role)==="owner";(0,l.useEffect)(()=>{(async()=>{try{u(!0);let e=await fetch("/api/employees");if(!e.ok)throw Error("Failed to load employees");let s=await e.json();m(s.employees||[])}catch(e){console.error(e)}finally{u(!1)}})()},[]);let S=t.filter(s=>s.name.toLowerCase().includes(e.toLowerCase())),C=e=>new Intl.NumberFormat("en-US").format(e);return(0,a.jsx)("div",{className:"space-y-4 p-2 sm:p-4 md:p-6",dir:"rtl",children:(0,a.jsxs)(x.Zp,{className:"border-0 rounded-lg sm:rounded-xl shadow-sm",children:[(0,a.jsx)(x.aR,{className:"p-3 sm:p-4 md:p-6 border-b",children:(0,a.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row justify-between items-start sm:items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(x.ZB,{className:"text-sm sm:text-base md:text-lg font-semibold",children:"جميع الموظفين"}),(0,a.jsx)(x.BT,{className:"text-xs sm:text-sm",children:"قائمة بجميع الموظفين مع تعييناتهم في المعارض ومعلومات الرواتب"})]}),(0,a.jsxs)("div",{className:"relative w-full sm:w-56 md:w-64",children:[(0,a.jsx)(o.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 sm:h-4 sm:w-4 text-gray-400"}),(0,a.jsx)(d.p,{placeholder:"بحث...",value:e,onChange:e=>s(e.target.value),className:"pr-8 pl-8 sm:pr-10 sm:pl-10 w-full text-xs sm:text-sm h-8 sm:h-9"})]})]})}),(0,a.jsx)(x.Wu,{className:"p-0",children:g?(0,a.jsx)("div",{className:"flex justify-center items-center p-8 sm:p-12",children:(0,a.jsx)(h.A,{className:"h-6 w-6 sm:h-8 sm:w-8 animate-spin text-red-600"})}):0===S.length?(0,a.jsxs)("div",{className:"text-center p-6 sm:p-12",children:[(0,a.jsx)(A.A,{className:"mx-auto h-8 w-8 sm:h-12 sm:w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-3 text-sm sm:text-base md:text-lg font-medium text-gray-900",children:e?"لا توجد نتائج بحث":"لا يوجد موظفون"}),(0,a.jsx)("p",{className:"mt-1 text-xs sm:text-sm text-gray-500",children:e?"حاول تعديل مصطلحات البحث الخاصة بك":"ابدأ بإضافة موظف جديد"}),E&&!e&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(r.$,{asChild:!0,size:"sm",children:(0,a.jsxs)(n(),{href:"/dashboard/employees/new",children:[(0,a.jsx)(p.A,{className:"ml-2 h-4 w-4"}),(0,a.jsx)("span",{className:"text-xs sm:text-sm",children:"إضافة موظف جديد"})]})})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"sm:hidden space-y-2 p-2",children:S.map(e=>(0,a.jsxs)(x.Zp,{className:"p-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(A.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"font-medium text-sm",children:e.name})]}),(0,a.jsx)(i.E,{variant:"outline",className:"text-[10px]",children:e.role})]}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-xs",children:[(0,a.jsx)(j.A,{className:"h-3 w-3 text-gray-400"}),(0,a.jsx)("span",{children:e.showroomName||b(e.showroom_id)})]}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-xs",children:[(0,a.jsx)(N.M,{}),(0,a.jsx)("span",{className:"font-medium",children:C(e.salary)})]}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:e.createdAt?new Date(e.createdAt).toLocaleDateString("en"):"—"})})]},e.id))}),(0,a.jsx)("div",{className:"hidden sm:block overflow-x-auto",children:(0,a.jsxs)(c.XI,{className:"min-w-full",children:[(0,a.jsx)(c.A0,{className:"bg-gray-50",children:(0,a.jsxs)(c.Hj,{children:[(0,a.jsx)(c.nd,{className:"text-right text-xs sm:text-sm px-2 sm:px-4 py-2",children:"اسم الموظف"}),(0,a.jsx)(c.nd,{className:"text-right text-xs sm:text-sm px-2 sm:px-4 py-2",children:"الصفة"}),(0,a.jsx)(c.nd,{className:"text-right text-xs sm:text-sm px-2 sm:px-4 py-2",children:"المعرض"}),(0,a.jsx)(c.nd,{className:"text-right text-xs sm:text-sm px-2 sm:px-4 py-2",children:"الراتب"}),(0,a.jsx)(c.nd,{className:"text-right text-xs sm:text-sm px-2 sm:px-4 py-2",children:"تاريخ الانضمام"})]})}),(0,a.jsx)(c.BF,{children:S.map(e=>(0,a.jsxs)(c.Hj,{className:"hover:bg-gray-50",children:[(0,a.jsx)(c.nA,{className:"px-2 sm:px-4 py-2",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(A.A,{className:"ml-2 h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-xs sm:text-sm",children:e.name})]})}),(0,a.jsx)(c.nA,{className:"px-2 sm:px-4 py-2",children:(0,a.jsx)(i.E,{variant:"outline",className:"text-[10px] sm:text-xs",children:{accountant:"محاسب",employee:"موظف"}[e.role]||e.role})}),(0,a.jsx)(c.nA,{className:"px-2 sm:px-4 py-2",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(j.A,{className:"ml-2 h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-xs sm:text-sm",children:e.showroomName||b(e.showroom_id)})]})}),(0,a.jsx)(c.nA,{className:"px-2 sm:px-4 py-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(N.M,{}),(0,a.jsx)("span",{className:"text-[10px] sm:text-xs",children:C(e.salary)})]})}),(0,a.jsx)(c.nA,{className:"text-muted-foreground text-xs sm:text-sm px-2 sm:px-4 py-2",children:e.createdAt?new Date(e.createdAt).toLocaleDateString("en"):"—"})]},e.id))})]})})]})})]})})}}},e=>{e.O(0,[120,261,958,117,562,552,772,358],()=>e(e.s=5714)),_N_E=e.O()}]);