(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[334],{305:(e,r,t)=>{"use strict";t.d(r,{J:()=>i});var a=t(7553),s=t(5525),d=t(5176),l=t(7140),n=t(7466);let o=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(d.b,{ref:r,className:(0,n.cn)(o(),t),...s})});i.displayName=d.b.displayName},1652:(e,r,t)=>{"use strict";t.d(r,{AddEmployeePage:()=>y});var a=t(7553),s=t(5525),d=t(8836),l=t(2319),n=t(3851),o=t(8445),i=t(6423),c=t(7131),m=t(8433),u=t(1999),f=t(8793),x=t(3366);let p=x.Ik({name:x.Yj().min(2,"الاسم قصير جداً"),email:x.Yj().email("البريد غير صالح"),password:x.Yj().min(6,"كلمة المرور قصيرة جداً"),role:x.k5(["employee","accountant"]),showroomId:x.Yj().min(1,"اختر معرضًا"),salary:x.vk(e=>Number(e),x.ai().min(1,"الراتب مطلوب"))});var h=t(2026),g=t(3616);function y(){let[e,r]=(0,s.useState)(!1),[t,x]=(0,s.useState)([]),[y,b]=(0,s.useState)(!0),{toast:j}=(0,f.dj)(),v=(0,n.useRouter)();(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/showrooms");if(!e.ok)throw Error("فشل تحميل المعارض");let r=await e.json();x(r.showrooms||[])}catch(e){j({title:"خطأ",description:"فشل تحميل قائمة المعارض",variant:"destructive"})}finally{b(!1)}})()},[j]);let N=(0,d.mN)({resolver:(0,l.u)(p),defaultValues:{name:"",email:"",password:"",role:"employee",showroomId:"",salary:0}}),w=async e=>{r(!0);try{let r={...e,showroomId:e.showroomId,salary:Number(e.salary)},t=await fetch("/api/create-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!t.ok){let e=await t.json();throw Error(e.error||"فشل في إنشاء الموظف")}j({title:"تم بنجاح",description:"تم إنشاء الموظف بنجاح"}),v.push("/dashboard/employees")}catch(e){j({title:"خطأ",description:e.message,variant:"destructive"})}finally{r(!1)}};return(0,a.jsx)("div",{dir:"rtl",children:(0,a.jsx)("div",{children:(0,a.jsxs)(i.Zp,{className:"border-0 ",children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"p-2 text-primary",children:(0,a.jsx)(h.A,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.ZB,{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"تفاصيل الموظف"}),(0,a.jsx)(i.BT,{className:"text-gray-600 dark:text-gray-400 mt-1",children:"الرجاء تعبئة جميع الحقول المطلوبة"})]})]})}),(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsx)(u.lV,{...N,children:(0,a.jsxs)("form",{onSubmit:N.handleSubmit(w),className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(u.zB,{control:N.control,name:"name",render:e=>{let{field:r}=e;return(0,a.jsxs)(u.eI,{children:[(0,a.jsx)(u.lR,{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"اسم الموظف"}),(0,a.jsx)(u.MJ,{children:(0,a.jsx)(c.p,{placeholder:"أدخل الاسم الكامل",...r,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-800 dark:text-white"})}),(0,a.jsx)(u.C5,{className:"text-red-500 text-xs mt-1"})]})}}),(0,a.jsx)(u.zB,{control:N.control,name:"email",render:e=>{let{field:r}=e;return(0,a.jsxs)(u.eI,{children:[(0,a.jsx)(u.lR,{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"البريد الإلكتروني"}),(0,a.jsx)(u.MJ,{children:(0,a.jsx)(c.p,{placeholder:"example@email.com",...r,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-800 dark:text-white"})}),(0,a.jsx)(u.C5,{className:"text-red-500 text-xs mt-1"})]})}}),(0,a.jsx)(u.zB,{control:N.control,name:"password",render:e=>{let{field:r}=e;return(0,a.jsxs)(u.eI,{children:[(0,a.jsx)(u.lR,{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"كلمة المرور"}),(0,a.jsx)(u.MJ,{children:(0,a.jsx)(c.p,{type:"password",placeholder:"••••••••",...r,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-800 dark:text-white"})}),(0,a.jsx)(u.C5,{className:"text-red-500 text-xs mt-1"})]})}}),(0,a.jsx)(u.zB,{control:N.control,name:"role",render:e=>{let{field:r}=e;return(0,a.jsxs)(u.eI,{children:[(0,a.jsx)(u.lR,{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 ",children:"الدور الوظيفي"}),(0,a.jsxs)(m.l6,{onValueChange:r.onChange,defaultValue:r.value,children:[(0,a.jsx)(u.MJ,{children:(0,a.jsx)(m.bq,{className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-800 dark:text-white justify-end",children:(0,a.jsx)(m.yv,{placeholder:"اختر الدور"})})}),(0,a.jsxs)(m.gC,{children:[(0,a.jsx)(m.eb,{value:"employee",children:"موظف"}),(0,a.jsx)(m.eb,{value:"accountant",children:"محاسب"})]})]}),(0,a.jsx)(u.C5,{className:"text-red-500 text-xs mt-1"})]})}}),(0,a.jsx)(u.zB,{control:N.control,name:"showroomId",render:e=>{let{field:r}=e;return(0,a.jsxs)(u.eI,{children:[(0,a.jsx)(u.lR,{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"المعرض التابع له"}),(0,a.jsxs)(m.l6,{onValueChange:r.onChange,defaultValue:r.value,disabled:y,children:[(0,a.jsx)(u.MJ,{children:(0,a.jsx)(m.bq,{className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-800 dark:text-white justify-end",children:(0,a.jsx)(m.yv,{placeholder:y?"جاري تحميل المعارض...":"اختر المعرض"})})}),(0,a.jsxs)(m.gC,{children:[t.map(e=>(0,a.jsx)(m.eb,{value:e.id,children:e.name},e.id)),0===t.length&&!y&&(0,a.jsx)(m.eb,{value:"",disabled:!0,children:"لا توجد معارض متاحة"})]})]}),(0,a.jsx)(u.C5,{className:"text-red-500 text-xs mt-1"})]})}}),(0,a.jsx)(u.zB,{control:N.control,name:"salary",render:e=>{let{field:r}=e;return(0,a.jsxs)(u.eI,{children:[(0,a.jsx)(u.lR,{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"الراتب الشهري"}),(0,a.jsx)(u.MJ,{children:(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(c.p,{type:"number",placeholder:"0.00",...r,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-800 dark:text-white pl-12 no-spinner"})})}),(0,a.jsx)(u.C5,{className:"text-red-500 text-xs mt-1"})]})}})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,a.jsx)(o.$,{type:"button",variant:"outline",onClick:()=>v.push("/dashboard/employees"),className:"px-5 py-2.5 rounded-lg border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800",children:"إلغاء"}),(0,a.jsx)(o.$,{type:"submit",disabled:e,className:"px-5 py-2.5 rounded-lg bg-primary hover:bg-primary/90 text-white shadow-sm",children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.A,{className:"ml-2 h-4 w-4 animate-spin"}),"جاري الحفظ..."]}):"إضافة الموظف"})]})]})})})]})})})}},1999:(e,r,t)=>{"use strict";t.d(r,{C5:()=>g,MJ:()=>h,eI:()=>x,lR:()=>p,lV:()=>i,zB:()=>m});var a=t(7553),s=t(5525),d=t(7533),l=t(8836),n=t(7466),o=t(305);let i=l.Op,c=s.createContext({}),m=e=>{let{...r}=e;return(0,a.jsx)(c.Provider,{value:{name:r.name},children:(0,a.jsx)(l.xI,{...r})})},u=()=>{let e=s.useContext(c),r=s.useContext(f),{getFieldState:t,formState:a}=(0,l.xW)(),d=t(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=r;return{id:n,name:e.name,formItemId:"".concat(n,"-form-item"),formDescriptionId:"".concat(n,"-form-item-description"),formMessageId:"".concat(n,"-form-item-message"),...d}},f=s.createContext({}),x=s.forwardRef((e,r)=>{let{className:t,...d}=e,l=s.useId();return(0,a.jsx)(f.Provider,{value:{id:l},children:(0,a.jsx)("div",{ref:r,className:(0,n.cn)("space-y-2",t),...d})})});x.displayName="FormItem";let p=s.forwardRef((e,r)=>{let{className:t,...s}=e,{error:d,formItemId:l}=u();return(0,a.jsx)(o.J,{ref:r,className:(0,n.cn)(d&&"text-destructive",t),htmlFor:l,...s})});p.displayName="FormLabel";let h=s.forwardRef((e,r)=>{let{...t}=e,{error:s,formItemId:l,formDescriptionId:n,formMessageId:o}=u();return(0,a.jsx)(d.DX,{ref:r,id:l,"aria-describedby":s?"".concat(n," ").concat(o):"".concat(n),"aria-invalid":!!s,...t})});h.displayName="FormControl",s.forwardRef((e,r)=>{let{className:t,...s}=e,{formDescriptionId:d}=u();return(0,a.jsx)("p",{ref:r,id:d,className:(0,n.cn)("text-sm text-muted-foreground",t),...s})}).displayName="FormDescription";let g=s.forwardRef((e,r)=>{let{className:t,children:s,...d}=e,{error:l,formMessageId:o}=u(),i=l?String(null==l?void 0:l.message):s;return i?(0,a.jsx)("p",{ref:r,id:o,className:(0,n.cn)("text-sm font-medium text-destructive",t),...d,children:i}):null});g.displayName="FormMessage"},2026:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(2735).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},3851:(e,r,t)=>{"use strict";var a=t(8739);t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})},6423:(e,r,t)=>{"use strict";t.d(r,{BT:()=>i,Wu:()=>c,ZB:()=>o,Zp:()=>l,aR:()=>n});var a=t(7553),s=t(5525),d=t(7466);let l=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});l.displayName="Card";let n=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",t),...s})});n.displayName="CardHeader";let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("h3",{ref:r,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})});o.displayName="CardTitle";let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("p",{ref:r,className:(0,d.cn)("text-sm text-muted-foreground",t),...s})});i.displayName="CardDescription";let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,d.cn)("p-6 pt-0",t),...s})});c.displayName="CardContent",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,d.cn)("flex items-center p-6 pt-0",t),...s})}).displayName="CardFooter"},6742:(e,r,t)=>{Promise.resolve().then(t.bind(t,1652))},7131:(e,r,t)=>{"use strict";t.d(r,{p:()=>l});var a=t(7553),s=t(5525),d=t(7466);let l=s.forwardRef((e,r)=>{let{className:t,type:s,...l}=e;return(0,a.jsx)("input",{type:s,className:(0,d.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...l})});l.displayName="Input"},7466:(e,r,t)=>{"use strict";t.d(r,{cn:()=>d});var a=t(2530),s=t(6747);function d(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.$)(r))}},8433:(e,r,t)=>{"use strict";t.d(r,{bq:()=>u,eb:()=>h,gC:()=>p,l6:()=>c,yv:()=>m});var a=t(7553),s=t(5525),d=t(2275),l=t(5312),n=t(3241),o=t(5514),i=t(7466);let c=d.bL;d.YJ;let m=d.WT,u=s.forwardRef((e,r)=>{let{className:t,children:s,...n}=e;return(0,a.jsxs)(d.l9,{ref:r,className:(0,i.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[s,(0,a.jsx)(d.In,{asChild:!0,children:(0,a.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=d.l9.displayName;let f=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(d.PP,{ref:r,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})});f.displayName=d.PP.displayName;let x=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(d.wn,{ref:r,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})});x.displayName=d.wn.displayName;let p=s.forwardRef((e,r)=>{let{className:t,children:s,position:l="popper",...n}=e;return(0,a.jsx)(d.ZL,{children:(0,a.jsxs)(d.UC,{ref:r,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l,...n,children:[(0,a.jsx)(f,{}),(0,a.jsx)(d.LM,{className:(0,i.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(x,{})]})})});p.displayName=d.UC.displayName,s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(d.JU,{ref:r,className:(0,i.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s})}).displayName=d.JU.displayName;let h=s.forwardRef((e,r)=>{let{className:t,children:s,...l}=e;return(0,a.jsxs)(d.q7,{ref:r,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(d.VF,{children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})}),(0,a.jsx)(d.p4,{children:s})]})});h.displayName=d.q7.displayName,s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(d.wv,{ref:r,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",t),...s})}).displayName=d.wv.displayName},8445:(e,r,t)=>{"use strict";t.d(r,{$:()=>i});var a=t(7553),s=t(5525),d=t(7533),l=t(7140),n=t(7466);let o=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=s.forwardRef((e,r)=>{let{className:t,variant:s,size:l,asChild:i=!1,...c}=e,m=i?d.DX:"button";return(0,a.jsx)(m,{className:(0,n.cn)(o({variant:s,size:l,className:t})),ref:r,...c})});i.displayName="Button"},8793:(e,r,t)=>{"use strict";t.d(r,{dj:()=>m});var a=t(5525);let s=0,d=new Map,l=e=>{if(d.has(e))return;let r=setTimeout(()=>{d.delete(e),i({type:"REMOVE_TOAST",toastId:e})},1e6);d.set(e,r)},n=[],o={toasts:[]};function i(e){o=((e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=r;return t?l(t):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}})(o,e),n.forEach(e=>{e(o)})}function c(e){let{...r}=e,t=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>i({type:"DISMISS_TOAST",toastId:t});return i({type:"ADD_TOAST",toast:{...r,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>i({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,r]=a.useState(o);return a.useEffect(()=>(n.push(r),()=>{let e=n.indexOf(r);e>-1&&n.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>i({type:"DISMISS_TOAST",toastId:e})}}}},e=>{e.O(0,[120,83,359,67,552,772,358],()=>e(e.s=6742)),_N_E=e.O()}]);