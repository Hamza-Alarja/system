(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{2649:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>y});var n=a(7553),s=a(5525),t=a(7466),o=a(4488);let i=s.forwardRef((e,r)=>{let{className:a,children:s,...i}=e;return(0,n.jsxs)(o.bL,{ref:r,className:(0,t.cn)("relative overflow-hidden",a),...i,children:[(0,n.jsx)(o.LM,{className:"h-full w-full rounded-[inherit]",children:s}),(0,n.jsx)(l,{}),(0,n.jsx)(o.OK,{})]})});i.displayName=o.bL.displayName;let l=s.forwardRef((e,r)=>{let{className:a,orientation:s="vertical",...i}=e;return(0,n.jsx)(o.VM,{ref:r,orientation:s,className:(0,t.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...i,children:(0,n.jsx)(o.lr,{className:"relative flex-1 rounded-full bg-border"})})});l.displayName=o.VM.displayName;var d=a(8542),c=a(6393),u=a(2801),h=a(2026),m=a(9196),p=a(349),f=a(4742),g=a.n(f),x=a(3851),v=a(9365);let w=[{name:"لوحة التحكم",href:"/dashboard",icon:d.A,roles:["owner","accountant","manager"]},{name:"المعارض",href:"/dashboard/showrooms",icon:c.A,roles:["owner","accountant"]},{name:"إضافة معرض",href:"/dashboard/showrooms/new",icon:u.A,roles:["owner"]},{name:"الموظفون",href:"/dashboard/employees",icon:h.A,roles:["owner","accountant"]},{name:"إضافة موظف",href:"/dashboard/employees/new",icon:m.A,roles:["owner","accountant"]},{name:"المعاملات ",href:"/dashboard/transactions",icon:p.A,roles:["owner","accountant"]}];function b(e){let{className:r}=e,a=(0,x.usePathname)(),{user:o}=(0,v.n)(),[l,d]=(0,s.useState)(!1);if(!o||!["owner","accountant"].includes(o.role.trim().toLowerCase()))return null;let c=w.filter(e=>o&&["owner","accountant"].includes(o.role)&&e.roles.includes(o.role));return(0,n.jsxs)(n.Fragment,{children:[!l&&(0,n.jsx)("button",{onClick:()=>d(!0),"aria-label":"فتح القائمة",className:"fixed top-3 left-3 z-50 md:hidden",children:(0,n.jsxs)("div",{className:"relative group",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center w-10 h-10 rounded-full bg-red-500/90 hover:bg-red-600 transition-all duration-200 shadow-md group-hover:shadow-lg",children:[(0,n.jsx)("span",{className:"block w-5 h-0.5 bg-white mb-1.5 transition-all duration-200 transform group-hover:translate-y-1 group-hover:rotate-45 origin-center"}),(0,n.jsx)("span",{className:"block w-5 h-0.5 bg-white mb-1.5 transition-all duration-100 opacity-100 group-hover:opacity-0"}),(0,n.jsx)("span",{className:"block w-5 h-0.5 bg-white transition-all duration-200 transform group-hover:-translate-y-1 group-hover:-rotate-45 origin-center"})]}),(0,n.jsx)("div",{className:"absolute inset-0 rounded-full bg-red-400/30 animate-ping opacity-0 group-hover:opacity-0 transition-opacity duration-700"})]})}),(0,n.jsxs)("div",{className:(0,t.cn)("fixed top-0 right-0 h-full w-64 bg-card border-l border-gray-200 shadow-md transform transition-transform duration-300 ease-in-out z-40",r,l?"translate-x-0":"translate-x-full","md:relative md:translate-x-0 md:block"),children:[l&&(0,n.jsx)("div",{className:"flex justify-end p-4 md:hidden",children:(0,n.jsxs)("button",{onClick:()=>d(!1),"aria-label":"إغلاق القائمة",className:"group relative p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500/50 transition-all duration-300",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-red-500/10 dark:bg-red-900/40 rounded-md    opacity-0 group-hover:opacity-100 transition-opacity duration-300   group-active:scale-95 group-active:bg-red-500/20"}),(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-600 dark:text-red-400    group-hover:text-red-700 dark:group-hover:text-red-300    group-hover:scale-110 group-active:scale-95   transition-all duration-300 transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),(0,n.jsx)("span",{className:"absolute inset-0 rounded-md overflow-hidden",children:(0,n.jsx)("span",{className:"absolute inset-0 bg-red-500 opacity-0 group-active:opacity-20 group-active:animate-ripple transition-all duration-700"})})]})}),(0,n.jsx)("div",{className:"space-y-4 py-4",children:(0,n.jsx)("div",{className:"px-3 py-2",children:(0,n.jsx)(i,{className:"h-[calc(100vh-8rem)]",children:(0,n.jsx)("div",{className:"space-y-1",children:c.map(e=>(0,n.jsxs)(g(),{href:e.href,className:(0,t.cn)("group flex flex-row-reverse items-center rounded-md px-3 py-2 text-sm font-medium transition-colors",a===e.href?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),onClick:()=>d(!1),children:[(0,n.jsx)(e.icon,{className:"ml-2 h-4 w-4"}),(0,n.jsx)("span",{className:"mr-2",children:e.name})]},e.name))})})})})]})]})}function y(e){let{children:r}=e;return(0,n.jsxs)("div",{className:"flex flex-row-reverse min-h-screen",children:[(0,n.jsx)(b,{}),(0,n.jsx)("main",{className:"flex-1 p-4  flex-row-reverse min-h-screen ",children:r})]})}},4227:(e,r,a)=>{Promise.resolve().then(a.bind(a,2649))},7466:(e,r,a)=>{"use strict";a.d(r,{cn:()=>t});var n=a(2530),s=a(6747);function t(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,s.QP)((0,n.$)(r))}},9365:(e,r,a)=>{"use strict";a.d(r,{n:()=>o});var n=a(7966),s=a(1326),t=a(261);let o=(0,n.v)()((0,s.Zr)(e=>{let r=(0,t.createClientComponentClient)();return{user:null,isAuthenticated:!1,isLoading:!1,login:async(a,n)=>{e({isLoading:!0});try{if("string"!=typeof a||"string"!=typeof n)throw Error("Email and password must be strings");let{data:s,error:t}=await r.auth.signInWithPassword({email:a.trim(),password:n.trim()});if(t)throw t;if(!s.user)throw Error("User not found after login");let{data:o,error:i}=await r.from("users").select("name, role").eq("auth_user_id",s.user.id).single();if(i)throw i;e({user:{id:s.user.id,email:s.user.email||a,name:(null==o?void 0:o.name)||"",role:(null==o?void 0:o.role)||"employee"},isAuthenticated:!0,isLoading:!1})}catch(r){throw e({isLoading:!1}),console.error("Login error:",r),r}},logout:async()=>{e({isLoading:!0});try{await r.auth.signOut()}finally{e({user:null,isAuthenticated:!1,isLoading:!1})}},checkAuth:async()=>{e({isLoading:!0});try{let{data:{session:t}}=await r.auth.getSession();if(null==t?void 0:t.user){var a,n,s;let{data:o,error:i}=await r.from("users").select("name, role").eq("auth_user_id",t.user.id).single();if(i||!o)throw i;e({user:{id:t.user.id,email:null!=(a=t.user.email)?a:"",name:null!=(n=o.name)?n:"",role:null!=(s=o.role)?s:"employee"},isAuthenticated:!0,isLoading:!1})}else e({user:null,isAuthenticated:!1,isLoading:!1})}catch(r){console.error("checkAuth error:",r),e({user:null,isAuthenticated:!1,isLoading:!1})}}}},{name:"auth-storage"}))}},e=>{e.O(0,[120,261,958,95,552,772,358],()=>e(e.s=4227)),_N_E=e.O()}]);